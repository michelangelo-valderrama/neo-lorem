---
import type { CollectionEntry } from "astro:content"

interface Props {
  post: CollectionEntry<"blog">
}

const { post } = Astro.props
const pubDate = post.data.pubDate.toDateString()
const update = post.data.update?.toDateString() ?? pubDate
const title = post.data.title
const description = post.data.description
const bannerUrl = new URL(
  post.data.mainImg ?? "https://if7sports.com/assets/images/blog/Bonos3.webp",
  Astro.site
)
const bannerAlt = post.data.title ?? "Image alt"
const bannerWidth = 800
const bannerHeight = 420
---

<meta slot="meta" name="robots" content="index, follow" />

<meta property="article:publisher" content={Astro.site} />
<meta property="article:author" content={Astro.site} />
{post.data.tags.map((tag) => <meta property="article:tag" content={tag} />)}
<meta property="article:published_time" content={pubDate} />
<meta property="article:modified_time" content={update} />

<script
  type="application/ld+json"
  set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "Article",
    headline: title,
    abstract: description,
    image: [
      {
        contentUrl: bannerUrl,
        width: bannerWidth,
        height: bannerHeight,
        caption: bannerAlt,
      },
    ],
    dateCreated: pubDate,
    datePublished: pubDate,
    dateModified: update,
    author: [
      {
        "@type": "People",
        name: "Michelangelo",
        url: Astro.site,
      },
    ],
  })}
/>
